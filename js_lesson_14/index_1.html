<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style/style_task.css">
    <title>Lesson 14 - home task</title>
</head>
<body>
    <div class="wrapper">
        <main class="home">
            <div class="home__container">
                <div class="home__task task"></div>
                <h3 class="task__title">Урок 14 - Домашнє завдання 1 (1 - 7) <mark>(Результати виведені в консоль.)</mark></h3>
                <div class="task__condition">
                    Задача 1. Описати масив об’єктів – сайтів розроблених компанією з такими властивостями <br>
                    ----- Властивості ------ <br>
                    назва компанії на час розробки (назву періодично змінюють) <br>
                    власник компанії <br>
                    споснсори (масив спонсорів) <br>
                        * прізвище спонсора <br>
                        * ім’я  спонсора <br>
                        * сума вкладень спонсора <br>
                    рік випуску <br>
                    вартість сайту <br>
                    =================================== <br>
                    Знайти: <br>
                    1) загальну вартість усіх сайтів <br>
                    2) кількість сайтів, що було зроблено між 2000 та 2009 рр. <br>
                    3) кількість сайтів, де сума спонсорських вкладень була більшою за 100000 <br>
                    4) створити загальний список усіх спонсорів (поки можуть повторюватись, просто зібрати усі у масив) <br>
                    5) знайти рік, коли прибуток був найбільшим <br>
                    6) упорядкувати список за спаданням прибутку <br>
                    7) Створити 2 окремих списки з копіями об’єктів, що містять сайти з вартість до 10000 і більше 10000 <br>
                    
                </div>
                <div class="task__computing">
                    <script>

                        //Задача 1. Описати масив об’єктів – сайтів розроблених компанією з такими властивостями
                        let sitesStorage = [
                        site_1 = {
                            company_name: 'Ergo',
                            company_owner: 'Eldar Kikabidze', 
                            sponsors: [
                                {
                                    sponsor_name: 'Tkacnev',
                                    sponsor_surename: 'Artem',
                                    sum_sponsor_investments: 348000
                                },
                                {
                                    sponsor_name: 'Margarita',
                                    sponsor_surename: 'Ostrozhska',
                                    sum_sponsor_investments: 230000
                                }, 
                                {
                                    sponsor_name: 'Anton',
                                    sponsor_surename: 'Bashev',
                                    sum_sponsor_investments: 317000
                                }

                        ],
                            release_year: 2001,
                            site_price: 1534000
                        },

                        site_2 = {
                            company_name: 'Prostir',
                            company_owner: 'Sameul Babichev', 
                            sponsors: [
                                {
                                    sponsor_name: ' Artem',
                                    sponsor_surename: 'Tkacnev',
                                    sum_sponsor_investments: 128000
                                },
                                {
                                    sponsor_name: 'Antonina',
                                    sponsor_surename: 'Martirosyan',
                                    sum_sponsor_investments: 53400
                                }, 
                                {
                                    sponsor_name: 'Oleksii',
                                    sponsor_surename: 'Kamishev',
                                    sum_sponsor_investments: 41800
                                }

                        ],
                            release_year: 2022,
                            site_price: 630000
                        },

                        site_3 = {
                            company_name: 'Red deer',
                            company_owner: 'Jack Simens', 
                            sponsors: [
                                {
                                    sponsor_name: 'Antonio',
                                    sponsor_surename: 'Dispirosa',
                                    sum_sponsor_investments: 146900
                                },
                                {
                                    sponsor_name: 'Miya',
                                    sponsor_surename: 'Kaminskaya',
                                    sum_sponsor_investments: 94000
                                }, 
                                {
                                    sponsor_name: 'Oleksii',
                                    sponsor_surename: 'Kamishev',
                                    sum_sponsor_investments: 71800
                                }

                        ],
                            release_year: 2009,
                            site_price: 440000
                        },

                        site_4 = {
                            company_name: 'Campara',
                            company_owner: 'Entoni Thomson', 
                            sponsors: [
                                {
                                    sponsor_name: 'Denis',
                                    sponsor_surename: 'Kotov',
                                    sum_sponsor_investments: 23000
                                },
                                {
                                    sponsor_name: 'Anna',
                                    sponsor_surename: 'Martirosyan',
                                    sum_sponsor_investments: 82000
                                }, 
                                {
                                    sponsor_name: 'Anton',
                                    sponsor_surename: 'Kopytov',
                                    sum_sponsor_investments: 118000
                                }

                        ],
                            release_year: 2011,
                            site_price: 323000
                        }, 

                        site_5 = {
                            company_name: 'Pakahontas',
                            company_owner: 'Maya Tokyto', 
                            sponsors: [
                                {
                                    sponsor_name: 'David',
                                    sponsor_surename: 'Antonov',
                                    sum_sponsor_investments: 678000
                                },
                                {
                                    sponsor_name: 'Miya',
                                    sponsor_surename: 'Kaminskaya',
                                    sum_sponsor_investments: 340000
                                }, 
                                {
                                    sponsor_name: 'Oleksii',
                                    sponsor_surename: 'Kamishev',
                                    sum_sponsor_investments: 98000
                                }

                        ],
                            release_year: 2007,
                            site_price: 794000
                        }, 

                        site_6 = {
                            company_name: 'DoDo',
                            company_owner: 'Maya Tokyto', 
                            sponsors: [
                                {
                                    sponsor_name: 'Oleh',
                                    sponsor_surename: 'Samoylov',
                                    sum_sponsor_investments: 18000
                                },
                                {
                                    sponsor_name: 'Miya',
                                    sponsor_surename: 'Kaminskaya',
                                    sum_sponsor_investments: 40000
                                }, 
                                {
                                    sponsor_name: 'Anna',
                                    sponsor_surename: 'Martirosyan',
                                    sum_sponsor_investments: 25000
                                }

                        ],
                            release_year: 1998,
                            site_price: 344000
                        }
                    ]
                    //-------------------------------------------------------------------------------------------------------
                    //Знайти: 1) загальну вартість усіх сайтів (for, forEach, forOf).

                    // --- for
                    function getSumSitesCost(sitesStorage) {
                        let sumSitesCost = 0
                        for (let i = 0; i < sitesStorage.length; i++) {
                            sumSitesCost += sitesStorage[i].site_price
                        }
                        return sumSitesCost
                    }
                    console.log(`Загальна вартість усіх сайтів (for): ${getSumSitesCost_3(sitesStorage)}`);

                    // --- forEach 
                    function getSumSitesCost_2(sitesStorage) {
                        let sumSitesCost = 0
                        sitesStorage.forEach(
                        site => sumSitesCost += site.site_price
                    )
                    return sumSitesCost
                    }

                    console.log(`Загальна вартість усіх сайтів (forEach): ${getSumSitesCost_2(sitesStorage)}`);

                    // --- forOf
                    function getSumSitesCost_3(sitesStorage) {
                        let sumSitesCost = 0
                        for(shop of sitesStorage) {
                            sumSitesCost += shop.site_price
                        }
                        return sumSitesCost
                    }

                    console.log(`Загальна вартість усіх сайтів (forOf): ${getSumSitesCost_3(sitesStorage)}`);

                    function getSumSitesCost_4(sitesStorage) {
                        return sitesStorage.reduce(
                            (totalSum, site) => totalSum += site.site_price, 0
                        )
                    }

                    console.log(`Загальна вартість усіх сайтів (reduce): ${getSumSitesCost_4(sitesStorage)}`);

                    //-------------------------------------------------------------------------------------------------------
                    //2) кількість сайтів, що було зроблено між 2000 та 2009 рр.

                    // --- version 1
                    function findSitesByDate(sitesStorage, beginDate, endDate) {
                        let sitesStorageByDate = [], counter = 0
                        sitesStorage.forEach(site => {
                            if (site.release_year >= beginDate && site.release_year <= endDate) {
                                sitesStorageByDate.push(site)
                                counter++
                            } 
                        });
                        return [counter, sitesStorageByDate] // рахую і кількість сайтів і отримаю масив таких сайтів
                    }

                    console.log(`Сайтів розроблено в заданий проміжок часу (кількість та безпосередньо самі сайти (forEach)):`);
                    console.log(findSitesByDate(sitesStorage, 2000, 2009));

                   // --- version 2
                    function findSitesByDate_2 (sitesStorage, beginDate, endDate) {
                        let result = sitesStorage.reduce(
                            (counter, site)  => 
                                (site.release_year >= beginDate && site.release_year >= endDate) ? counter + 1 : counter, 0
                        )
                        return result
                    }

                    console.log(`Сайтів розроблено в заданий проміжок часу (reduce): ${findSitesByDate_2 (sitesStorage, 2000, 2009)}`);

                    //-------------------------------------------------------------------------------------------------------
                    //3) кількість сайтів, де сума спонсорських вкладень була більшою за 100000

                    // first version - for, forEach
                    function sitesWithBigSponsorSum(sitesStorage, sponsorLimit) {
                        let counter = 0 
                        for (let site = 0; site < sitesStorage.length; site++) {
                            let totalSiteInvestments = 0
                            sitesStorage[site].sponsors.forEach(
                                sponsor => totalSiteInvestments += sponsor.sum_sponsor_investments
                            )
                            if (totalSiteInvestments > sponsorLimit) counter++
                        }
                        return counter
                    }

                    console.log(`Сайтів з інвестиціями більше 100 000 (for, forEach): ${sitesWithBigSponsorSum(sitesStorage, 100000)}`);

                    //second version - forEach, reduce
                    function sitesWithBigSponsorSum_2(sitesStorage, sponsorLimit) {
                        let counter = 0 
                        sitesStorage.forEach(
                            site => {
                                let sum = 0
                                site.sponsors.reduce((totalSum, sponsor)=> {sum += sponsor.sum_sponsor_investments}, 0)
                            if (sum > sponsorLimit) counter++
                            }
                        )
                        return counter
                    }
                    console.log(`Сайтів з інвестиціями більше 100 000 (forEach, reduce): ${sitesWithBigSponsorSum_2(sitesStorage, 100000)}`);
                    
                    
                    //-------------------------------------------------------------------------------------------------------
                    //4) створити загальний список усіх спонсорів (поки можуть повторюватись, просто зібрати усі у масив)

                    // first version 
                    function getAllSponsors (sitesStorage) {
                        let storageOfSponsors = []
                        sitesStorage.forEach(
                            site => site.sponsors.forEach(
                                sponsor => storageOfSponsors.push(sponsor) // якщо нам потрібан масив обєктів спонсорів повністю
                                // sponsor => storageOfSponsors.push(`${sponsor.sponsor_name} ${sponsor.sponsor_surename}`) // якщо нам потрібен масив тільки імен та фамілй спонсорів
                            )
                        )
                        return storageOfSponsors
                    }

                    console.log(`Загальний список усіх спонсорів:`);
                    console.log( getAllSponsors(sitesStorage));

                    //-------------------------------------------------------------------------------------------------------
                    //5) знайти рік, коли прибуток був найбільшим
                    // version 1 (for)
                    function findYearMaxIncome (sitesStorage) {
                        maxValueSite = sitesStorage[0]
                        for (let i = 1; i < sitesStorage.length; i++) {
                            if (maxValueSite < sitesStorage[i].site_price) maxValueSite = sitesStorage[i]
                        }
                        return maxValueSite.release_year
                    }

                    console.log(`Рік, коли прибуток був найбільшим (for): ${findYearMaxIncome (sitesStorage)}`);


                    //version 2 (reduce)
                    function findYearMaxIncome_2(sitesStorage) {
                        let maxYearIncome = sitesStorage.reduce(
                            (maxSitePrice, site) =>
                                (maxSitePrice <  site.site_price) ? site : maxSitePrice, 0
                        )
                        return maxYearIncome.release_year
                    }

                    console.log(`Рік, коли прибуток був найбільшим (reduce): ${findYearMaxIncome_2(sitesStorage)}`)
                    //-------------------------------------------------------------------------------------------------------
                    //6) упорядкувати список за спаданням прибутку

                    function sortSites(sitesStorage) {
                        let sortSitesStorage = JSON.parse(JSON.stringify(sitesStorage))
                        return sortSitesStorage.sort((a, b) => b.site_price - a.site_price
                        )
                    }

                    console.log('Упорядкований список за спаданням прибутку:');
                    console.log(sortSites(sitesStorage));

                    //-------------------------------------------------------------------------------------------------------
                    //7) Створити 2 окремих списки з копіями об’єктів, що містять сайти з вартість до 500000 і більше 500000

                    // version 1 (for)
                    function getTwoListsByPrice (sitesStorage, priceLimit) {
                        let lowerPriceSites = [], higherSitePrices = []
                        for (let i = 0; i < sitesStorage.length; i++) {
                            if (sitesStorage[i].site_price > priceLimit) {
                                higherSitePrices.push(sitesStorage[i])
                            } else {
                                lowerPriceSites.push(sitesStorage[i])
                            }
                        }
                        return [lowerPriceSites, higherSitePrices]
                    }

                    console.log('Створити 2 окремих списки з копіями об’єктів, що містять сайти з вартість до 500000 і більше 500000 (for)');
                    console.log(getTwoListsByPrice (sitesStorage, 500000));

                    // version 2 (filter)
                    function getTwoListsByPrice_2 (sitesStorage, priceLimit) {
                        let copySitesStorage = JSON.parse(JSON.stringify(sitesStorage))
                        lowerPriceSites = sitesStorage.filter(sites => sites.site_price > priceLimit)
                        higherSitePrices = sitesStorage.filter(site => site.site_price < priceLimit)
                        return [lowerPriceSites, higherSitePrices]
                    }

                    console.log('Створити 2 окремих списки з копіями об’єктів, що містять сайти з вартість до 500000 і більше 500000 (filter)');
                    console.log(getTwoListsByPrice_2 (sitesStorage, 500000));

                    // version 3 (filter - map)
                    function getTwoListsByPrice_3 (sitesStorage, priceLimit) {
                        lowerPriceSites = sitesStorage.filter((site) => site.site_price < priceLimit).map(site => JSON.parse(JSON.stringify(site)))
                        higherSitePrices = sitesStorage.filter((site) => site.site_price > priceLimit).map(site => JSON.parse(JSON.stringify(site)))
                        return [lowerPriceSites, higherSitePrices]
                    }

                    console.log('Створити 2 окремих списки з копіями об’єктів, що містять сайти з вартість до 500000 і більше 500000 (filter - map)');
                    console.log(getTwoListsByPrice_3 (sitesStorage, 500000));
                    </script>
                </div>
            </div>
        </main>
    </div>
</body>
</html>