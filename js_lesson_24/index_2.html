<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style/style_task.css">
    <title>Lesson 24 - home task 7</title>
</head>
<body>
    <div class="wrapper">
        <main class="home">
            <div class="home__container">
                <div class="home__task task"></div>
                <h3 class="task__title">Урок 24 - Домашнє завдання 7</h3>
                <div class="task__condition">
                    2. Користувач вводить кількість елементів. Створити масив, у якому перша половина заповнена 1-цями, а друга заповнена 7-ками.
                </div>
                <div class="task__computing">
                    <script>
                    // --------------------------------------------------------------------------------------------------------------------
                    // Задача 7. Користувач може змінювати колір фону, що вибирає користувач з використанням.
                    // <input type="color">.
                    // Зберігати цей колір і відновлювати при наступному відкритті. Також зберігати і відображати кількість змін протягом одного сеансу.
                    // Task 7. The user can change the background color of the user's choice using.
                    // <input type="color">.
                    // Keep this color and restore it at the next opening. Also save and display the number of changes during one session.

                    class ChangeBackgroundColor {

                        constructor() {
                            this.colorChangeSessionCounter = 0;
                            this.renderColorField();
                            this.saveColor();
                            this.applyColor();
                        }

                        renderColorField () {
                        let taskComputing = document.querySelector('.task__computing');
                        const colorFieldContainer = document.createElement('div');
                        taskComputing.appendChild(colorFieldContainer);
                        const label = document.createElement('label');
                        label.setAttribute('for', 'color_field_id');
                        label.innerText = 'Choose color';
                        colorFieldContainer.appendChild(label);
                        const colorInput = document.createElement('input');
                        colorInput.id = 'input_id';
                        colorInput.type = 'color';
                        colorInput.id = 'color_field_id';
                        colorFieldContainer.appendChild(colorInput);
                        const button = document.createElement('button');
                        button.className = 'button'
                        button.innerText = 'Save';
                        colorFieldContainer.appendChild(button);
                        const applySelectedColor = document.createElement('button');
                        applySelectedColor.id = 'apply_color_id';
                        applySelectedColor.innerText = 'Apply color';
                        colorFieldContainer.appendChild(applySelectedColor)
                    }

                    saveColor() {
                        const button = document.querySelector('.button');
                        const input = document.getElementById('color_field_id');
                        
                        input.addEventListener('change', () => {
                            this.colorChangeSessionCounter++;
                        });

                        button.addEventListener('click', () => {
                            let userColor = input.value;
                            localStorage.setItem('userColor', userColor);
                            localStorage.setItem('colorChangeSessionCounter', this.colorChangeSessionCounter);
                        });
                    }

                    applyColor() {
                        const applySelectedColor = document.getElementById('apply_color_id');
                        applySelectedColor.addEventListener('click', () => {
                            const selectedColor = localStorage.getItem('userColor');

                            if (selectedColor) {
                                this.setBackgroundColor(selectedColor);
                            };
                        });
                    }

                    setBackgroundColor (color) {
                        document.body.style.backgroundColor = color;
                    }
                    }

                    let backgroundColor = new ChangeBackgroundColor();
                    </script>
                    <style>
                        .task__computing {
                            padding-top: 20px;
                        }

                        .task__computing div {
                            padding: 20px;
                            width: 300px;
                            margin: 0 auto;
                            display: flex;
                            justify-content: space-between;
                            align-items: center;
                            border: 1px solid #777;
                            border-radius: 5px;
                            background-color: rgb(246, 243, 243);
                    }
                    </style>
                </div>
            </div>
        </main>
    </div>
</body>
</html>